{"remainingRequest":"/Users/apple/Desktop/vueprototype/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/vueprototype/node_modules/eslint-loader/index.js??ref--13-0!/Users/apple/Desktop/vueprototype/src/utils/axios.js","dependencies":[{"path":"/Users/apple/Desktop/vueprototype/src/utils/axios.js","mtime":1599616394000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CgovKgogKiBAQXV0aG9yOiBkb25naG9uZ3lhbgogKiBARGF0ZTogMjAyMC0wOC0wNiAxNTowMTo1OAogKiBARGVzY3JpcHRpb246IGFqYXjor7fmsYLlsIHoo4Vqczt5YW5nZ2FpdGluZ+i/m+ihjOS8mOWMlu+8mua3u+WKoOivt+axgmxvYWRpbmcKICogQERlc2NyaXB0aW9uOiBMb2FkaW5n55qE5L2/55So6K+05piO77ya5L2/55SoZWxlbWVudC11aee8luWGmeihqOagvOe7hOS7tuaXtuWPr+S7peS9v+eUqGxvYWRpbmfmjIfku6TvvIzoi6XkuI3mg7PkuLrmr4/kuKrooajmoLzpg73mt7vliqDmjIfku6TvvIzliJnlj6/ku6Xkvb/nlKjov5nkuKrmlofku7blpLnkuK3lsIHoo4XnmoRMb2FkaW5n77yM5L2G5piv6KaB5rOo5oSP5bm25LiN5Lya5omA5pyJ55qE5o6l5Y+j6YO96KaB5L2/55SobG9hZGluZyznu5PlkIjlrp7pmYXmg4XlhrXkvb/nlKjvvJsKICovCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7IC8v6buY6K6k5oOF5Ya15LiL77yMYXhpb3PlsIZKYXZhU2NyaXB05a+56LGh5bqP5YiX5YyW5Li6SlNPTuOAgiDopoHku6VhcHBsaWNhdGlvbiAvIHgtd3d3LWZvcm0tdXJsZW5jb2RlZOagvOW8j+WPkemAgeaVsOaNru+8jAovL+WPr+S7peS9v+eUqHFz5bqT57yW56CB5pWw5o2u77yb5L2/55So5pa55rOV77yacXMuc3RyaW5naWZ5KG9iaik7CgppbXBvcnQgcXMgZnJvbSAicXMiOwppbXBvcnQgeyBNZXNzYWdlIGFzIG1lc3NhZ2UgfSBmcm9tICJlbGVtZW50LXVpIjsKaW1wb3J0IGJ1cyBmcm9tICIuL2J1cyI7IC8v5Lul5LiL5piv5bCB6KOFbG9hZGluZwoKaW1wb3J0IHsgTG9hZGluZyB9IGZyb20gImVsZW1lbnQtdWkiOwppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CnZhciB2dWUgPSBuZXcgVnVlKCk7IC8v5pyA5aW95Zyo57yW5YaZ6KGo5qC857uE5Lu255qE5pe25YCZ5Yqg5LiK5oyH5LukbG9hZGluZwoKdmFyIGxvYWRpbmdJbnN0YW5jZTsKCnZhciBzaG93TG9hZGluZyA9IGZ1bmN0aW9uIHNob3dMb2FkaW5nKGNvbmZpZykgewogIGxvYWRpbmdJbnN0YW5jZSA9IExvYWRpbmcuc2VydmljZSh7CiAgICB0YXJnZXQ6ICIuZWwtdGFibGUiIC8v6buY6K6k5Li66KGo5qC85re75YqgbG9hZGluZwoKICB9KTsKfTsKCnZhciBjbG9zZUxvYWRpbmcgPSBmdW5jdGlvbiBjbG9zZUxvYWRpbmcoY29uZmlnKSB7CiAgdnVlLiRuZXh0VGljayhmdW5jdGlvbiAoXykgewogICAgLy/ku6XmnI3liqHlvIDlkK/nmoRsb2FkaW5n6ZyA6KaB5byC5q2l5YWz6ZetCiAgICBsb2FkaW5nSW5zdGFuY2UuY2xvc2UoKTsKICB9KTsKfTsgLy8g6buY6K6k6YWN572uCgoKdmFyIGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfVVJMLAogIC8vIHRpbWVvdXQ6IDMwMDAwLAogIGhlYWRlcnM6IHsKICAgIC8vICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywKICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAieC1yZXF1ZXN0ZWQtd2l0aCI6ICJYTUxIdHRwUmVxdWVzdCIKICB9Cn0pOyAvLyDlrprkuYnmi6bmiKrlmagKCmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgdmFyIHRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwoKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gdG9rZW47CiAgfSAvLyBzaG93TG9hZGluZyhjb25maWcpOwoKCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7Cmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgLy8gICBjbG9zZUxvYWRpbmcoKTsKICAvLyB9KQogIHZhciBjb2RlID0gcmVzcG9uc2UuZGF0YSAmJiArcmVzcG9uc2UuZGF0YS5jb2RlOwoKICBpZiAoY29kZSkgewogICAgaWYgKGNvZGUgPT09IDQwMSkgewogICAgICByZXR1cm4gYnVzLiRlbWl0KCJnb3RvIiwgIi9sb2dpbiIpOwogICAgfQoKICAgIGlmIChjb2RlID09PSA0MDkpIHsKICAgICAgbWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogIuS9oOeahOeahOi0puWPt+W3sue7j+WcqOWFtuS7luWcsOaWueeZu+mZhuaIlumAgOWHuueZu+W9le+8jOivt+mHjeaWsOeZu+W9le+8gSIsCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pOwogICAgICByZXR1cm4gYnVzLiRlbWl0KCJnb3RvIiwgIi9sb2dpbiIpOwogICAgfQoKICAgIGlmIChjb2RlID09PSA0MDMpIHsKICAgICAgcmV0dXJuIG1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6ICLkvaDmsqHmnInmnYPpmZAiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiByZXNwb25zZTsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIOWwgeijheivt+axguWvueixoQoKdmFyIHJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KG9wdGlvbnMpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgdmFyIG1ldGhvZCA9IChvcHRpb25zLnR5cGUgfHwgIkdFVCIpLnRvTG93ZXJDYXNlKCk7CiAgICB2YXIgY29uZmlnID0gewogICAgICBtZXRob2Q6IG9wdGlvbnMudHlwZSwKICAgICAgdXJsOiBvcHRpb25zLnVybAogICAgfTsKCiAgICBpZiAobWV0aG9kID09PSAicG9zdCIgJiYgb3B0aW9ucy5kYXRhKSB7CiAgICAgIGNvbmZpZy5kYXRhID0gb3B0aW9ucy5kYXRhOwogICAgfSBlbHNlIHsKICAgICAgaWYgKG9wdGlvbnMuZGF0YSAmJiAhb3B0aW9ucy5wYXJhbXMpIHsKICAgICAgICBjb25maWcucGFyYW1zID0gb3B0aW9ucy5kYXRhOwogICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGE7CiAgICAgIH0KICAgIH0KCiAgICBpbnN0YW5jZShjb25maWcpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgdmFyIHJlc3VsdCA9IGRhdGEuZGF0YTsKCiAgICAgIGlmICgrcmVzdWx0LmNvZGUgPT09IDApIHsKICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXN1bHQpOwogICAgICB9CgogICAgICByZXR1cm4gcmVqZWN0KHJlc3VsdCk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgcmVqZWN0KGVycm9yKTsKICAgIH0pOwogIH0pOwp9OwoKZXhwb3J0IGRlZmF1bHQgewogIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoVnVlKSB7CiAgICBWdWUucHJvdG90eXBlLiRheGlvcyA9IHJlcXVlc3Q7CiAgfQp9Ow=="},{"version":3,"sources":["/Users/apple/Desktop/vueprototype/src/utils/axios.js"],"names":["axios","qs","Message","message","bus","Loading","Vue","vue","loadingInstance","showLoading","config","service","target","closeLoading","$nextTick","_","close","instance","create","baseURL","process","env","VUE_APP_BASE_URL","headers","interceptors","request","use","token","window","localStorage","getItem","common","Authorization","error","Promise","reject","response","code","data","$emit","type","options","resolve","method","toLowerCase","url","params","then","result","catch","install","prototype","$axios"],"mappings":"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","sourcesContent":["/*\n * @Author: donghongyan\n * @Date: 2020-08-06 15:01:58\n * @Description: ajax请求封装js;yanggaiting进行优化：添加请求loading\n * @Description: Loading的使用说明：使用element-ui编写表格组件时可以使用loading指令，若不想为每个表格都添加指令，则可以使用这个文件夹中封装的Loading，但是要注意并不会所有的接口都要使用loading,结合实际情况使用；\n */\nimport axios from \"axios\";\n//默认情况下，axios将JavaScript对象序列化为JSON。 要以application / x-www-form-urlencoded格式发送数据，\n//可以使用qs库编码数据；使用方法：qs.stringify(obj);\nimport qs from \"qs\";\nimport { Message as message } from \"element-ui\";\nimport bus from \"./bus\";\n\n//以下是封装loading\nimport { Loading } from \"element-ui\";\nimport Vue from \"vue\";\nlet vue = new Vue();\n//最好在编写表格组件的时候加上指令loading\nlet loadingInstance;\nlet showLoading = (config) => {\n  loadingInstance = Loading.service({\n    target: \".el-table\", //默认为表格添加loading\n  });\n};\nlet closeLoading = (config) => {\n  vue.$nextTick((_) => {\n    //以服务开启的loading需要异步关闭\n    loadingInstance.close();\n  });\n};\n\n// 默认配置\nlet instance = axios.create({\n  baseURL: process.env.VUE_APP_BASE_URL,\n  // timeout: 30000,\n  headers: {\n    // 'Content-Type': 'application/x-www-form-urlencoded',\n    \"Content-Type\": \"application/json\",\n    \"x-requested-with\": \"XMLHttpRequest\",\n  },\n});\n\n// 定义拦截器\ninstance.interceptors.request.use(\n  (config) => {\n    const token = window.localStorage.getItem(\"token\");\n    if (token) {\n      config.headers.common.Authorization = token;\n    }\n    // showLoading(config);\n\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\ninstance.interceptors.response.use(\n  (response) => {\n    // setTimeout(() => {\n    //   closeLoading();\n    // })\n    const code = response.data && +response.data.code;\n    if (code) {\n      if (code === 401) {\n        return bus.$emit(\"goto\", \"/login\");\n      }\n\n      if (code === 409) {\n        message({\n          message: \"你的的账号已经在其他地方登陆或退出登录，请重新登录！\",\n          type: \"warning\",\n        });\n        return bus.$emit(\"goto\", \"/login\");\n      }\n\n      if (code === 403) {\n        return message({\n          message: \"你没有权限\",\n          type: \"warning\",\n        });\n      }\n    }\n\n    return response;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// 封装请求对象\nlet request = (options) =>\n  new Promise((resolve, reject) => {\n    const method = (options.type || \"GET\").toLowerCase();\n    let config = {\n      method: options.type,\n      url: options.url,\n    };\n    if (method === \"post\" && options.data) {\n      config.data = options.data;\n    } else {\n      if (options.data && !options.params) {\n        config.params = options.data;\n        delete options.data;\n      }\n    }\n    instance(config)\n      .then((data) => {\n        const result = data.data;\n        if (+result.code === 0) {\n          return resolve(result);\n        }\n\n        return reject(result);\n      })\n      .catch((error) => {\n        reject(error);\n      });\n  });\n\nexport default {\n  install(Vue) {\n    Vue.prototype.$axios = request;\n  },\n};\n"]}]}