{"remainingRequest":"/Users/apple/Desktop/vueprototype/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/vueprototype/src/pages/admin/role/manage/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/vueprototype/src/pages/admin/role/manage/index.vue","mtime":1599616394000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByb2xlQ2FyZCBmcm9tICcuLi8uLi8uLi8uLi9jb21wb25lbnRzL3JvbGUvbWFuYWdlL2hhbmRsZXJvbGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGtleTogIiIsCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIGNvZGVTZWFyY2g6ICIiLAogICAgICBwYWdlOiAxLAogICAgICBsaW1pdDogMTAsCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDmiYDmnInlrZflhbjliIbnsbsKICAgICAgYXV0aG9yaXRpZXM6IFtdLAogICAgICBzaG93Um9sZUNhcmQ6ZmFsc2UKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICAicm9sZS1jYXJkIjpyb2xlQ2FyZAogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU2l6ZUNoYW5nZShwYWdlU2l6ZSkgewogICAgICB0aGlzLmxpbWl0ID0gcGFnZVNpemU7CiAgICAgIHRoaXMuc2VhcmNoKCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZShjdXJyZW50KSB7CiAgICAgIHRoaXMucGFnZSA9IGN1cnJlbnQ7CiAgICAgIHRoaXMuc2VhcmNoKCk7CiAgICB9LAogICAgc2VhcmNoKCkgewogICAgICB0aGlzLiRheGlvcyh7CiAgICAgICAgdXJsOiAiL2FwaS1hZG1pbi9yb2xlL2xpc3QiLAogICAgICAgIHR5cGU6ICJnZXQiLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHBhZ2U6IHRoaXMucGFnZSwKICAgICAgICAgIGxpbWl0OiB0aGlzLmxpbWl0LAogICAgICAgICAgdGl0bGU6IHRoaXMua2V5LAogICAgICAgIH0sCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgY29uc3QgcGFnZSA9IChyZXMgfHwge30pLnBhZ2UgfHwge307CiAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHBhZ2Uucm93cyB8fCBbXTsKICAgICAgICAgIHRoaXMudG90YWwgPSArcGFnZS50b3RhbDsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogZXJyLm1zZyB8fCAi6I635Y+W6KeS6Imy5YiX6KGo5aSx6LSlIiwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKICAgIGFkZCgpIHsKICAgICAgLy/lop7liqDooajmoLzooYwKICAgICAgdGhpcy50YWJsZURhdGEudW5zaGlmdCh7CiAgICAgICAgcm9sZU5hbWU6ICIiLAogICAgICAgIGlzQWRkOiB0cnVlLAogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVDb21wbGV0ZShyb3cpIHsKICAgICAgLy/moKHpqowKICAgICAgaWYgKCFyb3cucm9sZU5hbWUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXop5LoibLlkI0iLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8v5Yy65YiG5piv5paw5aKe6L+Y5piv57yW6L6RCiAgICAgICAgaWYgKHJvdy5pc0FkZCkgewogICAgICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgICAgICB1cmw6ICIvYXBpLWFkbWluL3JvbGUvYWRkIiwKICAgICAgICAgICAgdHlwZTogInBvc3QiLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgcm9sZU5hbWU6IHJvdy5yb2xlTmFtZSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICB0aGlzLnNlYXJjaCgpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5tc2cgfHwgIuinkuiJsuaWsOWinuWksei0pSIsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBpZiAocm93LmlzRWRpdCkgewogICAgICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgICAgICB1cmw6ICIvYXBpLWFkbWluL3JvbGUvdXBkYXRlIiwKICAgICAgICAgICAgdHlwZTogInBvc3QiLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgcm9sZUlkOiByb3cucm9sZUlkLAogICAgICAgICAgICAgIHJvbGVOYW1lOiByb3cucm9sZU5hbWUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zZWFyY2goKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnIubXNnIHx8ICLop5LoibLkv67mlLnlpLHotKUiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVDYW5jZWwoaW5kZXgsIHJvdykgewogICAgICAvL+WMuuWIhuaYr+aWsOWinui/mOaYr+e8lui+kQogICAgICBpZihyb3cuaXNBZGQpewogICAgICAgIC8v5Yig6Zmk6KGo5qC86KGMCiAgICAgIHRoaXMudGFibGVEYXRhLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgICAgaWYocm93LmlzRWRpdCl7CiAgICAgICAgdGhpcy4kc2V0KHJvdywnaXNFZGl0JyxmYWxzZSkKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUVkaXQocm93KSB7CiAgICAgIGNvbnNvbGUubG9nKHJvdyk7CiAgICAgIHRoaXMuJHNldChyb3csICJpc0VkaXQiLCB0cnVlKTsKICAgIH0sCiAgICBoYW5kbGVEZWxldGUoeyByb2xlSWQgfSkgewogICAgICBjb25zb2xlLmxvZyhyb2xlSWQpCiAgICAgIHRoaXMuJGNvbmZpcm0oIuaYr+WQpuehruiupOWIoOmZpOatpOinkuiJsj8iLCAi5a6J5YWo5o+Q56S6IiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgICAgICB1cmw6ICIvYXBpLWFkbWluL3JvbGUvZGVsZXRlIiwKICAgICAgICAgICAgdHlwZTogInBvc3QiLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgcm9sZUlkLAogICAgICAgICAgICB9LAogICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOaIkOWKnyEiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuc2VhcmNoKCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnIubXNnIHx8ICLliKDpmaTlpLHotKUiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7fSk7CiAgICB9LAogICAgaGFuZGxlUm9sZShyb3cpewogICAgICB0aGlzLnNob3dSb2xlQ2FyZCA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKF8gPT4gewogICAgICAgIHRoaXMuJHRyaWdnZXIoJ2hhbmRsZVJvbGVzVHJlZScscm93KQogICAgICB9KQogICAgfSwKICAgIGNvbmZpcm1TZXQocm93RGF0YSl7CiAgICAgIGNvbnNvbGUubG9nKHJvd0RhdGEpCiAgICAgIHRoaXMuJGF4aW9zKHsKICAgICAgICAgICAgdXJsOiAiL2FwaS1hZG1pbi9yb2xlL3VwZGF0ZSIsCiAgICAgICAgICAgIHR5cGU6ICJwb3N0IiwKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgIHJvbGVJZDogcm93RGF0YS5yb2xlSWQsCiAgICAgICAgICAgICAgcm9sZU5hbWU6IHJvd0RhdGEucm9sZU5hbWUsCiAgICAgICAgICAgICAgbWVudUlkczogcm93RGF0YS5hdXRob3JpdHkuam9pbignLCcpCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgbGV0IHtjb2RlLG1zZ30gPSByZXM7CiAgICAgICAgICAgICAgaWYoY29kZSAhPSAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOidlcnJvcicsCiAgICAgICAgICAgICAgICBtZXNzYWdlOm1zZyB8fCAn6YWN572u5aSx6LSlJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOidzdWNjZXNzJywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6bXNnIHx8ICfphY3nva7miJDlip8nCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB0aGlzLnNob3dSb2xlQ2FyZCA9IGZhbHNlCiAgICAgICAgICAgICAgdGhpcy5zZWFyY2goKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnIubXNnIHx8ICLmnYPpmZDphY3nva7lpLHotKUiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxTZXQoKXsKICAgICAgY29uc29sZS5sb2coJ+WPlua2iCcpCiAgICAgIHRoaXMuc2hvd1JvbGVDYXJkID0gZmFsc2U7CiAgICB9LAogICAgZ2V0QXV0aG9yaXRpZXMoKSB7CiAgICAgIHRoaXMuJGF4aW9zKHsKICAgICAgICB1cmw6ICIvYXBpLWFkbWluL21lbnUvbGlzdCIsCiAgICAgICAgdHlwZTogImdldCIsCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5hdXRob3JpdGllcyA9IHJlcy5wYWdlIHx8IFtdOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiBlcnIubXNnIHx8ICLmnYPpmZDliqDovb3lpLHotKUiLAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0QXV0aG9yaXRpZXMoKTsKICAgIHRoaXMuc2VhcmNoKCk7CiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/admin/role/manage","sourcesContent":["<template>\n  <div class=\"role-manage\">\n    <div class=\"table-list\">\n      <div class=\"operators\">\n        <el-button\n          type=\"primary\"\n          class=\"fa fa-plus-circle fa-lg\"\n          size=\"small\"\n          @click=\"add\"\n          >&nbsp;角色新增</el-button\n        >\n      </div>\n      <el-table\n        ref=\"table\"\n        :data=\"\n          tableData.filter(\n            (data) =>\n              !codeSearch ||\n              data.roleName.toLowerCase().includes(codeSearch.toLowerCase())\n          )\n        \"\n        style=\"width: 100%\"\n        header-row-class-name=\"headerRow\"\n        :header-cell-style=\"{ background: '#eef1f6', color: '#606266' }\"\n      >\n        <el-table-column prop=\"roleName\" label=\"角色\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-input\n              v-if=\"scope.row.isAdd || scope.row.isEdit\"\n              v-model=\"scope.row.roleName\"\n              size=\"small\"\n              placeholder=\"请设置角色名\"\n            />\n            <span v-else>{{ scope.row.roleName }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column align=\"center\">\n          <template slot=\"header\">\n            <el-input\n              v-model=\"codeSearch\"\n              size=\"small\"\n              placeholder=\"输入角色名进行搜索\"\n            />\n          </template>\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"primary\"\n              v-if=\"!scope.row.isAdd && !scope.row.isEdit\"\n              size=\"mini\"\n              @click=\"handleEdit(scope.row)\"\n              >编辑</el-button\n            >\n            <el-button\n              v-if=\"!scope.row.isAdd && !scope.row.isEdit\"\n              size=\"mini\"\n              type=\"warning\"\n              @click=\"handleDelete(scope.row)\"\n              >删除</el-button\n            >\n            <el-button\n              v-if=\"!scope.row.isAdd && !scope.row.isEdit\"\n              size=\"mini\"\n              type=\"primary\"\n              @click=\"handleRole(scope.row)\"\n              >权限配置</el-button\n            >\n            <el-button\n              type=\"primary\"\n              v-if=\"scope.row.isAdd || scope.row.isEdit\"\n              size=\"mini\"\n              @click=\"handleComplete(scope.row)\"\n              >完成</el-button\n            >\n            <el-button\n              v-if=\"scope.row.isAdd || scope.row.isEdit\"\n              size=\"mini\"\n              type=\"warning\"\n              @click=\"handleCancel(scope.$index, scope.row)\"\n              >取消</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div class=\"pagination\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"page\"\n        :page-sizes=\"[10, 20, 30, 40]\"\n        :page-size=\"limit\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n      ></el-pagination>\n    </div>\n    <transition name=\"slide-fade\" mode=\"out-in\">\n      <role-card v-if=\"showRoleCard\" v-on:cancel-set='cancelSet' v-on:confirm-set='confirmSet' :authorities='authorities'></role-card>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport roleCard from '../../../../components/role/manage/handlerole';\nexport default {\n  data() {\n    return {\n      key: \"\",\n      tableData: [],\n      codeSearch: \"\",\n      page: 1,\n      limit: 10,\n      total: 0,\n      // 所有字典分类\n      authorities: [],\n      showRoleCard:false\n    };\n  },\n  components: {\n    \"role-card\":roleCard\n  },\n  methods: {\n    handleSizeChange(pageSize) {\n      this.limit = pageSize;\n      this.search();\n    },\n    handleCurrentChange(current) {\n      this.page = current;\n      this.search();\n    },\n    search() {\n      this.$axios({\n        url: \"/api-admin/role/list\",\n        type: \"get\",\n        data: {\n          page: this.page,\n          limit: this.limit,\n          title: this.key,\n        },\n      })\n        .then((res) => {\n          const page = (res || {}).page || {};\n          this.tableData = page.rows || [];\n          this.total = +page.total;\n        })\n        .catch((err) => {\n          this.$message({\n            message: err.msg || \"获取角色列表失败\",\n          });\n        });\n    },\n    add() {\n      //增加表格行\n      this.tableData.unshift({\n        roleName: \"\",\n        isAdd: true,\n      });\n    },\n    handleComplete(row) {\n      //校验\n      if (!row.roleName) {\n        this.$message({\n          type: \"info\",\n          message: \"请输入角色名\",\n        });\n      } else {\n        //区分是新增还是编辑\n        if (row.isAdd) {\n          this.$axios({\n            url: \"/api-admin/role/add\",\n            type: \"post\",\n            data: {\n              roleName: row.roleName,\n            },\n          })\n            .then((res) => {\n              this.search();\n            })\n            .catch((err) => {\n              this.$message({\n                type: \"error\",\n                message: err.msg || \"角色新增失败\",\n              });\n            });\n        }\n        if (row.isEdit) {\n          this.$axios({\n            url: \"/api-admin/role/update\",\n            type: \"post\",\n            data: {\n              roleId: row.roleId,\n              roleName: row.roleName,\n            },\n          })\n            .then((res) => {\n              this.search();\n            })\n            .catch((err) => {\n              this.$message({\n                type: \"error\",\n                message: err.msg || \"角色修改失败\",\n              });\n            });\n        }\n      }\n    },\n    handleCancel(index, row) {\n      //区分是新增还是编辑\n      if(row.isAdd){\n        //删除表格行\n      this.tableData.splice(index, 1);\n      }\n      if(row.isEdit){\n        this.$set(row,'isEdit',false)\n      }\n    },\n    handleEdit(row) {\n      console.log(row);\n      this.$set(row, \"isEdit\", true);\n    },\n    handleDelete({ roleId }) {\n      console.log(roleId)\n      this.$confirm(\"是否确认删除此角色?\", \"安全提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          this.$axios({\n            url: \"/api-admin/role/delete\",\n            type: \"post\",\n            data: {\n              roleId,\n            },\n          })\n            .then((res) => {\n              this.$message({\n                type: \"success\",\n                message: \"删除成功!\",\n              });\n              this.search();\n            })\n            .catch((err) => {\n              this.$message({\n                message: err.msg || \"删除失败\",\n              });\n            });\n        })\n        .catch(() => {});\n    },\n    handleRole(row){\n      this.showRoleCard = true;\n      this.$nextTick(_ => {\n        this.$trigger('handleRolesTree',row)\n      })\n    },\n    confirmSet(rowData){\n      console.log(rowData)\n      this.$axios({\n            url: \"/api-admin/role/update\",\n            type: \"post\",\n            data: {\n              roleId: rowData.roleId,\n              roleName: rowData.roleName,\n              menuIds: rowData.authority.join(',')\n            },\n          })\n            .then((res) => {\n              let {code,msg} = res;\n              if(code != 0) return this.$message({\n                type:'error',\n                message:msg || '配置失败'\n              })\n              this.$message({\n                type:'success',\n                message:msg || '配置成功'\n              })\n              this.showRoleCard = false\n              this.search();\n            })\n            .catch((err) => {\n              this.$message({\n                type: \"error\",\n                message: err.msg || \"权限配置失败\",\n              });\n            });\n    },\n    cancelSet(){\n      console.log('取消')\n      this.showRoleCard = false;\n    },\n    getAuthorities() {\n      this.$axios({\n        url: \"/api-admin/menu/list\",\n        type: \"get\",\n      })\n        .then((res) => {\n          this.authorities = res.page || [];\n        })\n        .catch((err) => {\n          this.$message({\n            message: err.msg || \"权限加载失败\",\n          });\n        });\n    },\n  },\n  created() {\n    this.getAuthorities();\n    this.search();\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.slide-fade-enter-active {\n  transition: all .5s ease;\n}\n.slide-fade-leave-active {\n  transition: all .5s ease;\n}\n.slide-fade-enter, .slide-fade-leave-to\n/* .slide-fade-leave-active for below version 2.1.8 */ {\n  transform: translateX(10px);\n  opacity: 0;\n}\n.role-manage {\n  padding: 20px;\n  .operators {\n    display: flex;\n    padding-top: 20px;\n  }\n  .table-list {\n    margin: 20px 0 0 0;\n    background: #fff;\n    /deep/ .el-input {\n      width: 80%;\n    }\n  }\n  .operators /deep/ .el-input {\n    width: 250px;\n  }\n  .pagination {\n    padding: 50px;\n    text-align: center;\n    background-color: #fff;\n  }\n  /deep/ .el-button {\n    margin: 0 0 0 20px;\n  }\n}\n</style>\n"]}]}