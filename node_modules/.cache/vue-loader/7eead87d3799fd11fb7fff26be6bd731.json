{"remainingRequest":"/Users/apple/Desktop/vueprototype/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/vueprototype/src/pages/layout/navbar.vue?vue&type=style&index=0&id=162f2041&lang=less&scoped=true&","dependencies":[{"path":"/Users/apple/Desktop/vueprototype/src/pages/layout/navbar.vue","mtime":1599616394000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLy8gQGltcG9ydCAiLi4vLi4vYXNzZXRzL2ZvbnRzL2ZvbnQuY3NzIjsKCi5uYXZiYXIgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IHJvdzsKICBoZWlnaHQ6IDgwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAwYjllZDsKICBjb2xvcjogI2ZmZjsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Cn0KCi5jb21wYW55IHsKICBkaXNwbGF5OiBmbGV4OwoKICBhbGlnbi1pdGVtczogY2VudGVyOwoKICAmLWxvZ28gewogICAgd2lkdGg6IDYwcHg7CiAgICBoZWlnaHQ6IDYwcHg7CiAgICBtYXJnaW46IDEwcHggMjBweDsKICAgIGJhY2tncm91bmQ6IHVybCguLi8uLi9hc3NldHMvaW1hZ2VzL2xvZ28ucG5nKSBuby1yZXBlYXQ7CiAgICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTAwJTsKICB9CgogICYtbmFtZSB7CiAgICBtYXJnaW46IDAgMCAwIDEwcHg7CiAgICBmb250LWZhbWlseTogIkFMSUhZQUlIRUkiOwogICAgZm9udC1zaXplOiAyOHB4OwogIH0KfQoKLnVzZXIgewogIGRpc3BsYXk6IGZsZXg7CiAgcGFkZGluZzogMTBweCAyMHB4OwoKICBhbGlnbi1pdGVtczogY2VudGVyOwogIC50aW1lIHsKICAgIG1hcmdpbi1yaWdodDogNjBweDsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgfQogICYtaWNvbiB7CiAgICB3aWR0aDogNDBweDsKICAgIGhlaWdodDogNDBweDsKICAgIG1hcmdpbjogMTBweCAyMHB4IDEwcHggMTBweDsKICAgIGJhY2tncm91bmQ6IHVybCguLi8uLi9hc3NldHMvaW1hZ2VzL2F2YXRhci5wbmcpIG5vLXJlcGVhdDsKICAgIGJhY2tncm91bmQtc2l6ZTogMTAwJSAxMDAlOwogIH0KCiAgJi1uYW1lIHsKICAgIGN1cnNvcjogcG9pbnRlcjsKICB9CiAgL2RlZXAvIC5lbC1kcm9wZG93biB7CiAgICBjb2xvcjogI2ZmZjsKICB9CiAgL2RlZXAvIC5lbC1kcm9wZG93bi1zZWxmZGVmaW5lIHsKICAgIGZvbnQtc2l6ZTogMjBweDsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgfQp9Cg=="},{"version":3,"sources":["navbar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"navbar.vue","sourceRoot":"src/pages/layout","sourcesContent":["<template>\n  <div class=\"navbar\">\n    <div class=\"company\">\n      <!-- <div class=\"company-logo\"></div> -->\n      <div class=\"company-name\">豫力汽配智慧管控系统</div>\n    </div>\n    <div class=\"user\">\n      <div class=\"time\">{{ currentDate }}</div>\n      <div class=\"user-icon\"></div>\n      <div class=\"user-name\">\n        <el-dropdown trigger=\"hover\" @command=\"dealUser\">\n          <span class=\"el-dropdown-link\">\n            {{ user.username }}\n            <i class=\"el-icon-arrow-down el-icon--right\"></i>\n          </span>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item command=\"changePwd\">修改密码</el-dropdown-item>\n            <el-dropdown-item command=\"logout\">退出</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </div>\n    </div>\n    <el-dialog title=\"修改密码\" :visible.sync=\"dialogFormVisible\" :center='true'>\n      <el-form :model=\"form\" :rules='rules' ref=\"ruleForm\">\n        <el-form-item label=\"旧密码\" :label-width=\"formLabelWidth\" prop='oldPassword'>\n          <el-input v-model=\"form.oldPassword\" autocomplete=\"off\" placeholder=\"请输入旧密码\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"新密码\" :label-width=\"formLabelWidth\" prop='newPassword'>\n          <el-input show-password v-model=\"form.newPassword\" autocomplete=\"off\" placeholder=\"请输入新密码\"></el-input>\n        </el-form-item>\n         <el-form-item label=\"确认新密码\" :label-width=\"formLabelWidth\" prop='checkPassword'>\n          <el-input show-password v-model=\"form.checkPassword\" autocomplete=\"off\" placeholder=\"请再次输入新密码\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"changePwd\"\n          >确 认</el-button\n        >\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { mapState } from \"vuex\";\nexport default {\n  data () {\n    let validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入新密码\"));\n      } else {\n        if (this.form.checkPassword !== \"\") {\n          this.$refs.ruleForm.validateField(\"checkPass\");\n        }\n        callback();\n      }\n    };\n    let validatePass2 = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请再次输入密码\"));\n      } else if (value !== this.form.newPassword) {\n        callback(new Error(\"两次输入密码不一致!\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      dialogFormVisible:false,\n      formLabelWidth:'100px',\n      form:{\n        oldPassword: '',\n        newPassword:'',\n        checkPassword:''\n      },\n      rules:{\n        oldPassword: [{required:true,trigger:'blur',message:'请输入旧密码'}],\n        newPassword: [{ validator: validatePass, trigger: \"blur\" }],\n        checkPassword: [{ validator: validatePass2, trigger: \"blur\" }],\n      },\n      currentDate:'',\n      timmer:''\n    }\n  },\n  computed: {\n    ...mapState({\n      user: (state) => state.login.user,\n    }),\n    // currentDate() {\n    //   return new Date().pattern(\"yyyy-MM-dd hh:mm:ss\");\n    // },\n  },\n  methods: {\n    dealUser(command) {\n      if (command === \"logout\") {\n        this.$confirm(\"是否确认退出?\", \"退出\", {\n          confirmButtonText: \"确认\",\n          cancelButtonText: \"取消\",\n          type: \"warning\",\n          center: true,\n          showClose: false,\n        })\n          .then(() => {\n            this.resetUser();\n            this.$router.push({\n              path: \"/login\",\n            });\n          })\n          .catch(() => {});\n      }\n      if (command == \"changePwd\") {\n        this.dialogFormVisible = true;\n      }\n    },\n    resetUser() {\n      this.$store.dispatch(\"login/setUser\", {});\n      this.$store.dispatch(\"login/setToken\", \"\");\n      this.$store.dispatch(\"login/setRouter\", \"\");\n      this.$store.dispatch(\"system/setPath\", \"\");\n    },\n    changePwd(){\n      //修改密码\n      this.$refs.ruleForm.validate((valid) => {\n        if(valid){\n          this.$axios({\n            url:'/api-admin/user/updatePassword',\n            type:'post',\n            data:{\n              id:this.user.id,\n              oldPassword:this.form.oldPassword,\n              password:this.form.newPassword\n            }\n          }).then(res => {\n            let {code,msg} =res;\n            if(code != 0) return this.$message({\n              type:'error',\n              message:msg || '修改密码失败'\n            });\n            this.$message({\n              type:'success',\n              message:msg || '修改密码成功'\n            });\n            this.dialogFormVisible = false\n          }).catch(err => {\n            this.$message({\n              type:'error',\n              message:err.msg || '修改密码失败'\n            })\n          })\n        }\n      })\n      \n    }\n  },\n  created () {\n    this.timmer=setInterval(()=>{\n      this.currentDate = new Date().pattern(\"yyyy-MM-dd hh:mm:ss\");\n    },1000)\n  },\n  beforeDestroy () {\n    clearInterval(this.timmer);\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n// @import \"../../assets/fonts/font.css\";\n\n.navbar {\n  display: flex;\n  flex-direction: row;\n  height: 80px;\n  background-color: #00b9ed;\n  color: #fff;\n  justify-content: space-between;\n}\n\n.company {\n  display: flex;\n\n  align-items: center;\n\n  &-logo {\n    width: 60px;\n    height: 60px;\n    margin: 10px 20px;\n    background: url(../../assets/images/logo.png) no-repeat;\n    background-size: 100% 100%;\n  }\n\n  &-name {\n    margin: 0 0 0 10px;\n    font-family: \"ALIHYAIHEI\";\n    font-size: 28px;\n  }\n}\n\n.user {\n  display: flex;\n  padding: 10px 20px;\n\n  align-items: center;\n  .time {\n    margin-right: 60px;\n    font-weight: 700;\n  }\n  &-icon {\n    width: 40px;\n    height: 40px;\n    margin: 10px 20px 10px 10px;\n    background: url(../../assets/images/avatar.png) no-repeat;\n    background-size: 100% 100%;\n  }\n\n  &-name {\n    cursor: pointer;\n  }\n  /deep/ .el-dropdown {\n    color: #fff;\n  }\n  /deep/ .el-dropdown-selfdefine {\n    font-size: 20px;\n    font-weight: 700;\n  }\n}\n</style>\n"]}]}