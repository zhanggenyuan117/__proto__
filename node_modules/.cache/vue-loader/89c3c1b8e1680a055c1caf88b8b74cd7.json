{"remainingRequest":"/Users/apple/Desktop/vueprototype/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/vueprototype/src/pages/admin/menu/manage/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/vueprototype/src/pages/admin/menu/manage/index.vue","mtime":1599616394000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmxldCBpZCA9IDEwMDA7CgpleHBvcnQgZGVmYXVsdCB7CiAgd2F0Y2g6IHsKICAgIGZpbHRlclRleHQodmFsKSB7CiAgICAgIHRoaXMuJHJlZnMudHJlZS5maWx0ZXIodmFsKTsKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVmYXVsdFByb3A6IHsKICAgICAgICBsYWJlbDogIm5hbWUiLAogICAgICB9LAogICAgICBmaWx0ZXJUZXh0OiAiIiwKICAgICAgbWVudURhdGFzOiBbXSwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBmb3JtTGFiZWxXaWR0aDogIjEwMHB4IiwKICAgICAgZm9ybTogewogICAgICAgIGlkOiAiIiwKICAgICAgICBuYW1lOiAiIiwKICAgICAgICB1cmw6ICIiLAogICAgICAgIGljb246ICIiLAogICAgICAgIHBpZDogIiIsCiAgICAgICAgc3RhdHVzOiAxLCAvL+m7mOiupOS4ujEg6I+c5Y2VCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICJibHVyIiwgbWVzc2FnZTogIuivt+i+k+WFpeiPnOWNleWQjeensCIgfV0sCiAgICAgICAgLy8gdXJsOiBbeyByZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogImJsdXIiLCBtZXNzYWdlOiAi6K+36L6T5YWl6K6/6Zeu6Lev5b6EIiB9XSwKICAgICAgfSwKICAgICAgZmxhZzogdHJ1ZSwgLy/ngrnlh7voj5zljZXmlrDlop7mjInpkq7moIfor4YKICAgICAgaXNBZGQ6IGZhbHNlLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNlYXJjaCgpIHsKICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgIHVybDogIi9hcGktYWRtaW4vbWVudS9saXN0IiwKICAgICAgICB0eXBlOiAicG9zdCIsCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGxldCB7IGNvZGUsIG1zZyB9ID0gcmVzOwogICAgICAgIGlmIChjb2RlICE9IDApCiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIG1lc3NhZ2U6IG1zZyB8fCAi6I+c5Y2V6I635Y+W5aSx6LSlIiwKICAgICAgICAgIH0pOwogICAgICAgIHRoaXMubWVudURhdGFzID0gKHJlcyB8fCB7fSkucGFnZSB8fCBbXTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkTWVudSgpIHsKICAgICAgdGhpcy5pc0FkZCA9IHRydWU7CiAgICAgIHRoaXMuZmxhZyA9IHRydWU7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljaygoXykgPT4gewogICAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgfSk7CiAgICB9LAogICAgc3VibWl0KCkgewogICAgICBpZiAoIXRoaXMuaXNBZGQpIHsKICAgICAgICB0aGlzLnVwZGF0ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWRkKCk7CiAgICAgIH0KICAgIH0sCiAgICBhZGQoKSB7CiAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAoIXRoaXMuZm9ybS5zdGF0dXMpIHRoaXMuZm9ybS5zdGF0dXMgPSAxOyAvL+m7mOiupAogICAgICAgICAgaWYgKHRoaXMuZmxhZykgewogICAgICAgICAgICB0aGlzLmZvcm0ucGlkID0gMDsKICAgICAgICAgIH0KICAgICAgICAgIGxldCB7IG5hbWUsIHVybCwgaWNvbiwgcGlkLCBzdGF0dXMgfSA9IHRoaXMuZm9ybTsKICAgICAgICAgIHRoaXMuJGF4aW9zKHsKICAgICAgICAgICAgdHlwZTogInBvc3QiLAogICAgICAgICAgICB1cmw6ICIvYXBpLWFkbWluL21lbnUvYWRkIiwKICAgICAgICAgICAgZGF0YTogeyBuYW1lLCB1cmwsIGljb24sIHBpZCwgc3RhdHVzIH0sCiAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgbGV0IHsgY29kZSwgbXNnIH0gPSByZXM7CiAgICAgICAgICAgICAgaWYgKGNvZGUgIT0gMCkKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbXNnIHx8ICLmlrDlop7lpLHotKUiLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuc2VhcmNoKCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyLm1zZyB8fCAi5paw5aKe5aSx6LSlIiwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBmaWx0ZXJOb2RlKHZhbHVlLCBkYXRhKSB7CiAgICAgIGlmICghdmFsdWUpIHJldHVybiB0cnVlOwogICAgICByZXR1cm4gZGF0YS5uYW1lLmluZGV4T2YodmFsdWUpICE9PSAtMTsKICAgIH0sCiAgICBhcHBlbmQoZGF0YSkgewogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgdGhpcy5mbGFnID0gZmFsc2U7CiAgICAgIHRoaXMuaXNBZGQgPSB0cnVlOwogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy4kbmV4dFRpY2soKF8pID0+IHsKICAgICAgICB0aGlzLiRyZWZzLnJ1bGVGb3JtLnJlc2V0RmllbGRzKCk7CiAgICAgICAgdGhpcy5mb3JtLnBpZCA9IGRhdGEuaWQ7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtKTsKICAgICAgfSk7CiAgICB9LAogICAgZWRpdChkYXRhKSB7CiAgICAgIHRoaXMuZmxhZyA9IGZhbHNlOwogICAgICB0aGlzLmlzQWRkID0gZmFsc2U7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljaygoXykgPT4gewogICAgICAgIC8v57yW6L6R6I+c5Y2VCiAgICAgICAgbGV0IHsgaWQsIG5hbWUsIHVybCwgaWNvbiwgcGlkLCBzdGF0dXMgfSA9IGRhdGE7CiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmZvcm0sIHsgaWQsIG5hbWUsIHVybCwgaWNvbiwgcGlkLCBzdGF0dXMgfSk7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtKTsKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlKCkgewogICAgICB0aGlzLiRheGlvcyh7CiAgICAgICAgdXJsOiAiL2FwaS1hZG1pbi9tZW51L3VwZGF0ZSIsCiAgICAgICAgdHlwZTogInBvc3QiLAogICAgICAgIGRhdGE6IHRoaXMuZm9ybSwKICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBsZXQgeyBjb2RlLCBtc2cgfSA9IHJlczsKICAgICAgICAgIGlmIChjb2RlICE9IDApCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIG1lc3NhZ2U6IG1zZyB8fCAi5pu05paw5aSx6LSlIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiBtc2cgfHwgIuabtOaWsOaIkOWKnyIsCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuc2VhcmNoKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5tc2cgfHwgIuabtOaWsOWksei0pSIsCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgICByZW1vdmUobm9kZSwgZGF0YSkgewogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgIHVybDogIi9hcGktYWRtaW4vbWVudS9kZWxldGUiLAogICAgICAgIHR5cGU6ICJwb3N0IiwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBpZDogZGF0YS5pZCwKICAgICAgICB9LAogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICBsZXQgeyBjb2RlLCBtc2cgfSA9IHJlczsKICAgICAgICBpZiAoY29kZSAhPSAwKQogICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBtZXNzYWdlOiBtc2cgfHwgIuWIoOmZpOWksei0pSIsCiAgICAgICAgICB9KTsKICAgICAgICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudDsKICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHBhcmVudC5kYXRhLmNoaWxkcmVuIHx8IHBhcmVudC5kYXRhOwogICAgICAgIGNvbnN0IGluZGV4ID0gY2hpbGRyZW4uZmluZEluZGV4KChkKSA9PiBkLmlkID09PSBkYXRhLmlkKTsKICAgICAgICBjaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgbWVzc2FnZTogbXNnIHx8ICLliKDpmaTmiJDlip8iLAogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2VhcmNoKCk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyByZW5kZXJDb250ZW50KGgsIHsgbm9kZSwgZGF0YSwgc3RvcmUgfSkgewogICAgLy8gICByZXR1cm4gKAogICAgLy8gICAgIDxzcGFuIGNsYXNzPSJjdXN0b20tdHJlZS1ub2RlIj4KICAgIC8vICAgICAgIDxzcGFuPntub2RlLmxhYmVsfTwvc3Bhbj4KICAgIC8vICAgICAgIDxzcGFuPgogICAgLy8gICAgICAgICA8ZWwtYnV0dG9uCiAgICAvLyAgICAgICAgICAgc2l6ZT0ibWluaSIKICAgIC8vICAgICAgICAgICB0eXBlPSJ0ZXh0IgogICAgLy8gICAgICAgICAgIG9uLWNsaWNrPXsoKSA9PiB0aGlzLmFwcGVuZChkYXRhKX0KICAgIC8vICAgICAgICAgPgogICAgLy8gICAgICAgICAgIEFwcGVuZAogICAgLy8gICAgICAgICA8L2VsLWJ1dHRvbj4KICAgIC8vICAgICAgICAgPGVsLWJ1dHRvbgogICAgLy8gICAgICAgICAgIHNpemU9Im1pbmkiCiAgICAvLyAgICAgICAgICAgdHlwZT0idGV4dCIKICAgIC8vICAgICAgICAgICBvbi1jbGljaz17KCkgPT4gdGhpcy5yZW1vdmUobm9kZSwgZGF0YSl9CiAgICAvLyAgICAgICAgID4KICAgIC8vICAgICAgICAgICBEZWxldGUKICAgIC8vICAgICAgICAgPC9lbC1idXR0b24+CiAgICAvLyAgICAgICA8L3NwYW4+CiAgICAvLyAgICAgPC9zcGFuPgogICAgLy8gICApOwogICAgLy8gfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnNlYXJjaCgpOwogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/admin/menu/manage","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"content\">\n      <div class=\"search\">\n        <el-input placeholder=\"输入关键字进行过滤\" v-model=\"filterText\">\n        </el-input>\n        <el-button type=\"primary\" @click=\"addMenu\">菜单新增</el-button>\n      </div>\n      <el-tree\n        :data=\"menuDatas\"\n        node-key=\"id\"\n        default-expand-all\n        accordion\n        :expand-on-click-node=\"false\"\n        :filter-node-method=\"filterNode\"\n        ref=\"tree\"\n        :props=\"defaultProp\"\n      >\n        <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\n          <span>{{ node.label }}</span>\n          <span class=\"buttons\" v-if=\"data.status == 1\">\n            <el-button\n              type=\"primary\"\n              @click=\"() => append(data)\"\n              icon=\"el-icon-plus\"\n            >\n            </el-button>\n            <el-button\n              type=\"primary\"\n              @click=\"() => edit(data)\"\n              icon=\"el-icon-edit\"\n            >\n            </el-button>\n            <el-button\n              type=\"primary\"\n              icon=\"el-icon-minus\"\n              @click=\"() => remove(node, data)\"\n            >\n            </el-button>\n          </span>\n          <span class=\"buttons2\" v-else>\n            <el-button\n              type=\"primary\"\n              @click=\"() => edit(data)\"\n              icon=\"el-icon-edit\"\n            >\n            </el-button>\n            <el-button\n              type=\"primary\"\n              icon=\"el-icon-minus\"\n              @click=\"() => remove(node, data)\"\n            >\n            </el-button>\n          </span>\n        </span>\n      </el-tree>\n    </div>\n    <div class=\"dialog\">\n      <el-dialog\n        :title=\"!isAdd ? '编辑' : '新增'\"\n        :visible.sync=\"dialogFormVisible\"\n        :center=\"true\"\n      >\n        <el-form :model=\"form\" :rules=\"rules\" ref=\"ruleForm\">\n          <el-form-item\n            v-if=\"!flag\"\n            label=\"类型\"\n            :label-width=\"formLabelWidth\"\n            prop=\"status\"\n          >\n            <el-radio-group v-model=\"form.status\" v-if=\"isAdd\">\n              <el-radio :label=\"1\">菜单</el-radio>\n              <el-radio :label=\"2\">操作</el-radio>\n            </el-radio-group>\n            <el-radio-group v-model=\"form.status\" v-if=\"!isAdd\">\n              <el-radio :label=\"1\" :disabled=\"form.status != 1\">菜单</el-radio>\n              <el-radio :label=\"2\" :disabled=\"form.status != 2\">操作</el-radio>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item label=\"名称\" :label-width=\"formLabelWidth\" prop=\"name\">\n            <el-input\n              v-model=\"form.name\"\n              autocomplete=\"off\"\n              placeholder=\"请输入名称\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item\n            label=\"访问路径\"\n            :label-width=\"formLabelWidth\"\n            prop=\"url\"\n          >\n            <el-input\n              v-model=\"form.url\"\n              autocomplete=\"off\"\n              placeholder=\"请输入访问路径\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item\n            label=\"图标类名\"\n            :label-width=\"formLabelWidth\"\n            prop=\"icon\"\n          >\n            <el-input\n              v-model=\"form.icon\"\n              autocomplete=\"off\"\n              placeholder=\"请输入图标类名\"\n            ></el-input>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"submit\">确 定</el-button>\n        </div>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n<script>\nlet id = 1000;\n\nexport default {\n  watch: {\n    filterText(val) {\n      this.$refs.tree.filter(val);\n    },\n  },\n  data() {\n    return {\n      defaultProp: {\n        label: \"name\",\n      },\n      filterText: \"\",\n      menuDatas: [],\n      dialogFormVisible: false,\n      formLabelWidth: \"100px\",\n      form: {\n        id: \"\",\n        name: \"\",\n        url: \"\",\n        icon: \"\",\n        pid: \"\",\n        status: 1, //默认为1 菜单\n      },\n      rules: {\n        name: [{ required: true, trigger: \"blur\", message: \"请输入菜单名称\" }],\n        // url: [{ required: true, trigger: \"blur\", message: \"请输入访问路径\" }],\n      },\n      flag: true, //点击菜单新增按钮标识\n      isAdd: false,\n    };\n  },\n  methods: {\n    search() {\n      this.$axios({\n        url: \"/api-admin/menu/list\",\n        type: \"post\",\n      }).then((res) => {\n        let { code, msg } = res;\n        if (code != 0)\n          return this.$message({\n            type: \"error\",\n            message: msg || \"菜单获取失败\",\n          });\n        this.menuDatas = (res || {}).page || [];\n      });\n    },\n    addMenu() {\n      this.isAdd = true;\n      this.flag = true;\n      this.dialogFormVisible = true;\n      this.$nextTick((_) => {\n        this.$refs.ruleForm.resetFields();\n      });\n    },\n    submit() {\n      if (!this.isAdd) {\n        this.update();\n      } else {\n        this.add();\n      }\n    },\n    add() {\n      this.$refs.ruleForm.validate((valid) => {\n        if (valid) {\n          if (!this.form.status) this.form.status = 1; //默认\n          if (this.flag) {\n            this.form.pid = 0;\n          }\n          let { name, url, icon, pid, status } = this.form;\n          this.$axios({\n            type: \"post\",\n            url: \"/api-admin/menu/add\",\n            data: { name, url, icon, pid, status },\n          })\n            .then((res) => {\n              let { code, msg } = res;\n              if (code != 0)\n                return this.$message({\n                  type: \"error\",\n                  message: msg || \"新增失败\",\n                });\n              this.dialogFormVisible = false;\n              this.search();\n            })\n            .catch((err) => {\n              this.$message({\n                type: \"error\",\n                message: err.msg || \"新增失败\",\n              });\n            });\n        }\n      });\n    },\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.name.indexOf(value) !== -1;\n    },\n    append(data) {\n      console.log(data);\n      this.flag = false;\n      this.isAdd = true;\n      this.dialogFormVisible = true;\n      this.$nextTick((_) => {\n        this.$refs.ruleForm.resetFields();\n        this.form.pid = data.id;\n        console.log(this.form);\n      });\n    },\n    edit(data) {\n      this.flag = false;\n      this.isAdd = false;\n      this.dialogFormVisible = true;\n      this.$nextTick((_) => {\n        //编辑菜单\n        let { id, name, url, icon, pid, status } = data;\n        Object.assign(this.form, { id, name, url, icon, pid, status });\n        console.log(this.form);\n      });\n    },\n    update() {\n      this.$axios({\n        url: \"/api-admin/menu/update\",\n        type: \"post\",\n        data: this.form,\n      })\n        .then((res) => {\n          let { code, msg } = res;\n          if (code != 0)\n            return this.$message({\n              type: \"error\",\n              message: msg || \"更新失败\",\n            });\n          this.$message({\n            type: \"success\",\n            message: msg || \"更新成功\",\n          });\n          this.dialogFormVisible = false;\n          this.search();\n        })\n        .catch((err) => {\n          this.$message({\n            type: \"error\",\n            message: err.msg || \"更新失败\",\n          });\n        });\n    },\n    remove(node, data) {\n      console.log(data);\n      this.$axios({\n        url: \"/api-admin/menu/delete\",\n        type: \"post\",\n        data: {\n          id: data.id,\n        },\n      }).then((res) => {\n        let { code, msg } = res;\n        if (code != 0)\n          return this.$message({\n            type: \"error\",\n            message: msg || \"删除失败\",\n          });\n        const parent = node.parent;\n        const children = parent.data.children || parent.data;\n        const index = children.findIndex((d) => d.id === data.id);\n        children.splice(index, 1);\n        this.$message({\n          type: \"success\",\n          message: msg || \"删除成功\",\n        });\n        this.search();\n      });\n    },\n\n    // renderContent(h, { node, data, store }) {\n    //   return (\n    //     <span class=\"custom-tree-node\">\n    //       <span>{node.label}</span>\n    //       <span>\n    //         <el-button\n    //           size=\"mini\"\n    //           type=\"text\"\n    //           on-click={() => this.append(data)}\n    //         >\n    //           Append\n    //         </el-button>\n    //         <el-button\n    //           size=\"mini\"\n    //           type=\"text\"\n    //           on-click={() => this.remove(node, data)}\n    //         >\n    //           Delete\n    //         </el-button>\n    //       </span>\n    //     </span>\n    //   );\n    // },\n  },\n  created() {\n    this.search();\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.wrapper {\n  padding: 20px;\n  .content {\n    width: 100%;\n    min-height: 600px;\n    background: #fff;\n    padding-top: 50px;\n    padding-left: 50px;\n    .search {\n      margin-bottom: 30px;\n      .el-input {\n        width: 350px;\n        margin-right: 50px;\n      }\n    }\n    .custom-tree-node {\n      flex: 0.2;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      font-size: 16px;\n      padding-right: 8px;\n      .el-tree-node {\n        position: relative;\n      }\n      .buttons,\n      .buttons2 {\n        display: block;\n        position: absolute;\n        left: 240px;\n      }\n      .el-button {\n        width: 20px;\n        height: 20px;\n        box-sizing: border-box;\n        padding: 0 22px 0 6px;\n      }\n    }\n    .buttons {\n      .el-button:nth-of-type(2) {\n        opacity: 0.5;\n      }\n      .el-button:nth-of-type(3) {\n        background: transparent;\n        border: 1px solid #f3b545;\n        color: #f3b545;\n      }\n    }\n    .buttons2 {\n      .el-button:nth-of-type(1) {\n        opacity: 0.5;\n      }\n      .el-button:nth-of-type(2) {\n        background: transparent;\n        border: 1px solid #f3b545;\n        color: #f3b545;\n      }\n    }\n  }\n  .el-dialog {\n    .el-form-item {\n      margin-bottom: 20px;\n    }\n  }\n}\n</style>\n"]}]}