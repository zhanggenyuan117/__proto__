{"remainingRequest":"/Users/apple/Desktop/vueprototype/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/vueprototype/src/components/user/manage/dialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/vueprototype/src/components/user/manage/dialog.vue","mtime":1599616394000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/vueprototype/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgcm9sZXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfSwKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVwdGxpc3Q6W10sCiAgICAgIHNob3dEaWFsb2c6IHRydWUsCiAgICAgIGZvcm1MYWJlbFdpZHRoOiAiODBweCIsCiAgICAgIC8vIOihqOWNleaVsOaNrgogICAgICBmb3JtOiB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIGpvYk51bWJlcjogIiIsCiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIHRlbGVOdW1iZXI6ICIiLAogICAgICAgIGRlcHRJZDoiIiwKICAgICAgICByb2xlSWQ6IiIsCiAgICAgICAgbmlja05hbWU6ICIiLAogICAgICAgIHN0YXR1czoiIgogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIGpvYk51bWJlcjogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogImJsdXIiLCBtZXNzYWdlOiAi6K+35aGr5YaZ55So5oi35bel5Y+3IiB9LAogICAgICAgIF0sCiAgICAgICAgdGVsZU51bWJlcjogW3sgcmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICJibHVyIiwgbWVzc2FnZTogIuivt+Whq+WGmeaJi+acuuWPtyIgfV0sCiAgICAgICAgdXNlcm5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICJibHVyIiwgbWVzc2FnZTogIuivt+Whq+WGmeeZu+W9leWQjSIgfSwKICAgICAgICBdLAogICAgICAgIGRlcHRJZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogImJsdXIiLCBtZXNzYWdlOiAi6K+36YCJ5oup5omA5bGe6YOo6ZeoIiB9LAogICAgICAgIF0sCiAgICAgICAgcm9sZUlkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAiYmx1ciIsIG1lc3NhZ2U6ICLor7fpgInmi6nmiYDlsZ7op5LoibIiIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgYWxsUm9sZXMoKXsKICAgICAgcmV0dXJuIHRoaXMucm9sZXM7CiAgICB9CiAgfSwKICB3YXRjaDoge30sCiAgZXZlbnRzOiB7CiAgICBlZGl0VXNlck1hbmFnZSh7CiAgICAgIGlkLAogICAgICBqb2JOdW1iZXIsCiAgICAgIHVzZXJuYW1lLAogICAgICBkZXB0SWQsCiAgICAgIHJvbGVJZCwKICAgICAgdGVsZU51bWJlciwKICAgICAgbmlja05hbWUsCiAgICAgIHN0YXR1cwogICAgfSkgewogICAgICB0aGlzLmZvcm0gPSBPYmplY3QuYXNzaWduKAogICAgICAgIHt9LAogICAgICAgIHsKICAgICAgICAgIGlkLAogICAgICAgICAgam9iTnVtYmVyLAogICAgICAgICAgdXNlcm5hbWUsCiAgICAgICAgICBkZXB0SWQsCiAgICAgICAgICByb2xlSWQ6ICtyb2xlSWQsCiAgICAgICAgICB0ZWxlTnVtYmVyLAogICAgICAgICAgbmlja05hbWUsCiAgICAgICAgICBzdGF0dXMKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGVwdCgpIHsKICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgIHVybDogIi9hcGktYWRtaW4vZGVwdC9hbGwiLAogICAgICAgIHR5cGU6ICJnZXQiCiAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuZGVwdGxpc3QgPSByZXMucGFnZSB8fCBbXTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5tc2cgfHwgIuiOt+WPlumDqOmXqOWIl+ihqOWksei0pSIKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKICAgIHN1Ym1pdChmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuJHRyaWdnZXIoImdldFVzZXJNYW5hZ2UiLCB0aGlzLmZvcm0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGNsb3NlKCkgewogICAgICB0aGlzLiR0cmlnZ2VyKCJjbG9zZVVzZXJNYW5hZ2VEaWFsb2ciKTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXREZXB0KCk7CiAgfSwKfTsK"},{"version":3,"sources":["dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dialog.vue","sourceRoot":"src/components/user/manage","sourcesContent":["/** * @file 新建/编辑对话框 * @author donghongyan * @date 2020-06-16 */\n\n<template>\n  <el-dialog\n    :title=\"form.id ? '编辑用户' : '用户新增'\"\n    width=\"600px\"\n    custom-class=\"usermanage\"\n    :visible.sync=\"showDialog\"\n    :close-on-press-escape=\"false\"\n    :close-on-click-modal=\"false\"\n    :show-close=\"false\"\n    :center=\"true\"\n    :destroy-on-close=\"true\"\n  >\n  \n    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\">\n      <el-form-item prop=\"jobNumber\" label=\"用户工号\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"form.jobNumber\" autocomplete=\"off\" placeholder=\"请填写用户工号\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"username\" label=\"登录名\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"form.username\" autocomplete=\"off\" placeholder=\"请填写登录名\"></el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"teleNumber\" label=\"手机号\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"form.teleNumber\" autocomplete=\"off\" placeholder=\"请填写手机号\"></el-input>\n      </el-form-item>\n       <el-form-item prop=\"deptId\" label=\"所属部门\" :label-width=\"formLabelWidth\">\n        <el-cascader\n          v-model=\"form.deptId\"\n          :options=\"deptlist\"\n          :props=\"{ label: 'name', value: 'id' }\"\n          placeholder=\"请选择所属部门\"\n        ></el-cascader>\n      </el-form-item>\n      <el-form-item prop=\"roleId\" label=\"所属角色\" :label-width=\"formLabelWidth\">\n        <el-select v-model=\"form.roleId\" placeholder=\"请选择所属角色\">\n          <el-option\n            v-for=\"(role, i) in allRoles\"\n            :key=\"'r' + i\"\n            :value=\"role.roleId\"\n            :label=\"role.roleName\"\n          ></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item prop=\"nickName\" label=\"用户昵称\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"form.nickName\" autocomplete=\"off\" placeholder=\"请填写用户昵称\"></el-input>\n      </el-form-item>\n    </el-form>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"close\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"submit('form')\">确 定</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nexport default {\n  props: {\n    roles: {\n      type: Array,\n      default: function() {\n        return [];\n      },\n    },\n  },\n  data() {\n    return {\n      deptlist:[],\n      showDialog: true,\n      formLabelWidth: \"80px\",\n      // 表单数据\n      form: {\n        id: \"\",\n        jobNumber: \"\",\n        username: \"\",\n        teleNumber: \"\",\n        deptId:\"\",\n        roleId:\"\",\n        nickName: \"\",\n        status:\"\"\n      },\n      rules: {\n        jobNumber: [\n          { required: true, trigger: \"blur\", message: \"请填写用户工号\" },\n        ],\n        teleNumber: [{ required: true, trigger: \"blur\", message: \"请填写手机号\" }],\n        username: [\n          { required: true, trigger: \"blur\", message: \"请填写登录名\" },\n        ],\n        deptId: [\n          { required: true, trigger: \"blur\", message: \"请选择所属部门\" },\n        ],\n        roleId: [\n          { required: true, trigger: \"blur\", message: \"请选择所属角色\" },\n        ],\n      },\n    };\n  },\n  computed: {\n    allRoles(){\n      return this.roles;\n    }\n  },\n  watch: {},\n  events: {\n    editUserManage({\n      id,\n      jobNumber,\n      username,\n      deptId,\n      roleId,\n      teleNumber,\n      nickName,\n      status\n    }) {\n      this.form = Object.assign(\n        {},\n        {\n          id,\n          jobNumber,\n          username,\n          deptId,\n          roleId: +roleId,\n          teleNumber,\n          nickName,\n          status\n        }\n      );\n    },\n  },\n  methods: {\n    getDept() {\n      this.$axios({\n        url: \"/api-admin/dept/all\",\n        type: \"get\"\n      })\n        .then(res => {\n          this.deptlist = res.page || [];\n        })\n        .catch(err => {\n          this.$message({\n            message: err.msg || \"获取部门列表失败\"\n          });\n        });\n    },\n    submit(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.$trigger(\"getUserManage\", this.form);\n          return;\n        }\n        return false;\n      });\n    },\n    close() {\n      this.$trigger(\"closeUserManageDialog\");\n    },\n  },\n  created() {\n    this.getDept();\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.usermanage {\n  .area {\n    display: flex;\n    /deep/ .el-select {\n      & + .el-select {\n        margin: 0 0 0 30px;\n      }\n      .el-input {\n        width: 90%;\n      }\n    }\n  }\n  .el-form /deep/ .el-input {\n    width: 400px;\n  }\n}\n.dialog-footer {\n  text-align: center;\n}\n</style>\n"]}]}